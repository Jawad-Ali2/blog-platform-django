{% extends 'base.html' %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section text-center">
    <div class="container">
        <h1 class="hero-title">
            Heartfelt <span style="color: rgba(255,255,255,0.95);">Reflections:</span> Stories of Love,<br>Loss, and Growth
        </h1>
        <p class="hero-subtitle mx-auto mb-4">
            Revision: Welcome to ultimate source for fresh perspectives! Explore curated content to enlighten, entertain and engage global readers.
        </p>
        
        <!-- Search Form -->
        <form class="search-form mx-auto mb-5" action="{% url 'blog:search' %}" method="get">
            <div class="input-group">
                <input class="form-control" type="search" name="query" placeholder="Search for stories..." aria-label="Search">
                <button class="btn btn-outline-light" type="submit">
                    <i class="bi bi-search"></i> Search
                </button>
            </div>
        </form>
        
        <!-- Topic Pills -->
        <div class="topic-pills">
            <a href="#" class="topic-pill">
                <i class="bi bi-laptop"></i> Technology
            </a>
            <a href="#" class="topic-pill">
                <i class="bi bi-airplane"></i> Travel
            </a>
            <a href="#" class="topic-pill">
                <i class="bi bi-dribbble"></i> Sport
            </a>
            <a href="#" class="topic-pill">
                <i class="bi bi-briefcase"></i> Business
            </a>
            <a href="#" class="topic-pill">
                <i class="bi bi-bar-chart"></i> Management
            </a>
            <a href="#" class="topic-pill">
                <i class="bi bi-lightning"></i> Trends
            </a>
            <a href="#" class="topic-pill">
                <i class="bi bi-rocket"></i> Startups
            </a>
            <a href="#" class="topic-pill">
                <i class="bi bi-newspaper"></i> News
            </a>
        </div>
    </div>
</div>

<!-- Featured Posts Section -->
<div class="container" style="margin-top: -40px;">
    <div class="row mb-4">
        <div class="col-12 text-center mb-4">
            <h2 class="fw-bold" style="color: var(--text-dark); font-size: 2rem;">Explore Trending Topics</h2>
        </div>
    </div>

    {% if page_obj %}
    <div class="row g-4">
        {% for post in page_obj %}
        <div class="col-md-6 col-lg-4">
            <a href="{% url 'blog:post_detail' post.slug %}" class="text-decoration-none" style="display: block; height: 100%;">
                <div class="card h-100">
                    {% if post.featured_image %}
                    <div style="overflow: hidden; border-radius: 16px 16px 0 0;">
                        <img src="{{ post.featured_image.url }}" class="post-image" alt="{{ post.title }}">
                    </div>
                    {% else %}
                    <div class="post-image d-flex align-items-center justify-content-center" style="background: linear-gradient(135deg, 
                        {% cycle '#667eea, #764ba2' '#f093fb, #f5576c' '#4facfe, #00f2fe' '#43e97b, #38f9d7' '#fa709a, #fee140' '#30cfd0, #330867' %});">
                        <i class="bi bi-image text-white" style="font-size: 4rem; opacity: 0.6;"></i>
                    </div>
                    {% endif %}
                    
                    <div class="card-body d-flex flex-column">
                        <div class="category-badge-container">
                            {% if post.category %}
                            <a href="{% url 'blog:category_posts' post.category.slug %}" class="badge bg-{{ post.category.name|lower }} text-decoration-none text-white" onclick="event.stopPropagation();">
                                {{ post.category.name|upper }}
                            </a>
                            {% endif %}
                            {% for tag in post.tags.all|slice:":2" %}
                            <a href="{% url 'blog:tag_posts' tag.slug %}" class="badge bg-secondary text-decoration-none text-white" onclick="event.stopPropagation();">
                                {{ tag.name|upper }}
                            </a>
                            {% endfor %}
                        </div>
                        
                        <h5 class="post-title" style="color: var(--text-dark);">
                            {{ post.title }}
                        </h5>
                        
                        <p class="post-excerpt flex-grow-1">
                            {{ post.content|striptags|truncatewords:15 }}
                        </p>
                        
                        <div class="post-meta mt-auto pt-3 border-top">
                            <div class="d-flex align-items-center">
                                <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center text-white" 
                                     style="width: 32px; height: 32px; font-weight: 700; font-size: 0.875rem;">
                                    {{ post.author.username|slice:":1"|upper }}
                                </div>
                                <div class="ms-2 flex-grow-1">
                                    <div style="font-weight: 600; font-size: 0.875rem; color: var(--text-dark);">
                                        {{ post.author.get_full_name|default:post.author.username }}
                                    </div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">
                                        {{ post.created_at|date:"F d, Y" }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>

    <!-- Pagination -->
    {% if page_obj.has_other_pages %}
    <nav aria-label="Page navigation" class="mt-5">
        <ul class="pagination justify-content-center">
            {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}">
                    <i class="bi bi-chevron-left"></i>
                </a>
            </li>
            {% endif %}
            
            {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
            <li class="page-item active">
                <span class="page-link">{{ num }}</span>
            </li>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
            <li class="page-item">
                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
            </li>
            {% endif %}
            {% endfor %}
            
            {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}">
                    <i class="bi bi-chevron-right"></i>
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}

    {% else %}
    <div class="text-center py-5">
        <i class="bi bi-inbox" style="font-size: 4rem; color: var(--text-muted);"></i>
        <p class="mt-3 text-muted">No posts available yet. Be the first to create one!</p>
    </div>
    {% endif %}
</div>

<!-- Newsletter Section -->
<div class="container my-5 py-5">
    <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 24px;">
        <div class="card-body text-center py-5 px-4">
            <h2 class="text-white fw-bold mb-3">Subscribe to our Newsletter</h2>
            <p class="text-white mb-4" style="opacity: 0.95;">Subscribe to our email newsletter to get the latest posts delivered right to your email.</p>
            <form class="mx-auto" style="max-width: 500px;" action="#" method="post">
                <div class="input-group">
                    <input type="email" class="form-control" placeholder="Enter Your Email" style="border-radius: 25px 0 0 25px; padding: 0.75rem 1.5rem; border: none;">
                    <button class="btn btn-light" type="submit" style="border-radius: 0 25px 25px 0; padding: 0.75rem 2rem; font-weight: 600; color: var(--primary-purple);">
                        Subscribe
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
